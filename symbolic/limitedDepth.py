import angr

class LimitedDepth(angr.SimProcedure):
    def run(self, *args, **kwargs): #pylint:disable=arguments-differ
        #pylint:disable=attribute-defined-outside-init
        o = self.state.solver.Unconstrained("depth_limit_", self.state.arch.bits, key=('api', '?', self.display_name))
        self.state.record.add_depth_limited(self.state.scratch.exit_ins_addr, o)
        return o
