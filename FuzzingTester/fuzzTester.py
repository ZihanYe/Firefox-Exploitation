import os
__all__ = ("FuzzTester")

class FuzzTester:
	def __init__(self, testcases, workd, logd=None, prefd=None):
		self.testdir = testcases
		self.workdir = workd
		self.logdir = logd
		self.prefdir = prefd

		if not os.path.isdir(self.testdir):
			raise Execption("testcases directory: no such directory")
		if not os.path.isdir(self.workdir):
			raise Execption("working directory: no such directory")

		if self.logdir == None:
			self.logdir = os.path.join(self.workdir, "out")
			os.makedirs(self.logdir)
		else:
			if not os.path.isdir(self.logdir):
				raise Execption("log directory: no such directory")
		self.index = 0
		self.files = os.listdir(testcases)
		self.filenum = len(self.files)
		self.currentTest = ''

	def getNextFile(self):
		while self.index < self.filenum and not self.files[self.index].endswith(".html"):
			self.index += 1

		if (index >= filenum):
			return None
		else:
			fn = self.files[self.index]
			self.index += 1
			self.currentTest = os.path.join(self.testdir, fn)
			return self.currentTest



